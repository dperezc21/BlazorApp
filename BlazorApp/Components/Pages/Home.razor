@page "/"

@inject ApiService ApiService

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

@if (items != null)
{
    <div class="grid-container">
        @foreach (var item in items)
        {
            <div class="grid-item">
                <strong>Codigo: @item.Codigo</strong><br />
                <div class="description">@item.Descripcion</div><br />
            
                @if(item.VActiva)
                {
                    <span class="text-status text-success">Activo</span>
                }
                else
                {
                    <span class="text-status text-danger">Inactivo</span>
                }
            </div>
        }
    </div>
}

@code {
    private List<InventoryTransaction> items = [];
    private readonly IConfiguration _config;
    public Home(IConfiguration config)
    {
        _config = config;
    }
    private string url = "";
    private async Task LoadData()
    {
        url = _config["ApiURL"] ?? "";
        items = await ApiService.GetItemsAsync<InventoryTransaction>(url);
    }

    protected override async Task OnInitializedAsync()
    {
        await LoadData();
    }
}